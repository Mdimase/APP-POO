<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<title th:inline="text">Info | [[${event.name}]]</title>
<style>
.container {
	margin: 5px auto;
	padding: 10px;
	border: 1px solid #000;
}

.section {
	margin: 10px auto;
	padding: 5px;
	border: 1px solid #000;
}

h1, h2 {
	text-align: center;
}

form {
	display: inline-block;
}

table {
	margin: auto;
}

table, td, th {
	text-align: center;
	border: 1px solid #000;
}

td {
	padding: 5px;
}
</style>
</head>
<body>
<a href="/home">Home</a>
<h1>Info</h1>
<span th:text="${errorHaveRegistrations}"></span>
<div class="container">
	<div class="section">
		<h2 th:text="${event.name}"></h2>
		<p th:text="'Event Date: ' + ${#dates.format(event.eventDate, 'dd-MM-yyyy')}"></p>
		<p th:text="'Start Registrations: ' + ${#dates.format(event.startRegistrations, 'dd-MM-yyyy')}"></p>
		<p th:text="'End Registrations: ' + ${#dates.format(event.endRegistrations, 'dd-MM-yyyy')}"></p>
		<p th:text="'Place: ' + ${event.place}"></p>
		<p th:text="'Capacity: ' + ${event.capacity}"></p>
		<p th:text="'Space Available: ' + ${spaceAvailable}"></p>
		<p th:text="'Cost: ' + (${event.cost > 0} ? ${event.cost} : 'Free')"></p>
		<p th:text="'Private / Public: ' + (${event.privateEvent} ? 'Private' : 'Public')"></p>
	</div>
	
	<div class="section">
		<h2>Registrations</h2>
		<div th:switch="${#lists.size(registrations)}">
			<h3 th:case="'0'">No registrations yet!</h3>
			<table th:case="*">
				<thead>
					<tr>
						<th>User Name</th>
						<th>Registered At</th>
						<th>Cost</th>
						<th>Payment Card</th>
						<th>Payment Card Number</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="registration : ${registrations}">
						<td th:text="${registration.user.lastName} + ' ' + ${registration.user.firstName}"></td>
						<td th:text="${registration.createdAt}"></td>
						<td th:text="${registration.event.cost > 0 } ? ${registration.event.cost} : 'Free' "></td>
						<td th:text="${registration.event.cost > 0 } ? ${payments[registrationStat.index].card} : 'Free' "></td>
						<td th:text="${registration.event.cost > 0 } ? ${payments[registrationStat.index].cardNumber} : 'Free' "></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>

	<div class="section">
		<h2>Invitations Sent</h2>
		<div th:switch="${#lists.size(usersInvitated)}">
			<h3 th:case="'0'">No Inviations Sent yet!</h3>
			<table th:case="*">
				<thead>
					<tr>
						<th>User Name</th>
						<th>First Name</th>
						<th>Last Name</th>
						<th>Delete</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="user : ${usersInvitated}">
						<td th:text="${user.username}"></td>
						<td th:text="${user.firstName}"></td>
						<td th:text="${user.lastName}"></td>
						<td><form action="#" th:action="@{/deleteinvitesent/{id}(id=${invitationsSent[userStat.index].id})}" method="post"><input type="submit" value="Delete"></form></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	
	<form action="#" th:action="@{/events/edit/{id}(id=${event.id})}" method="get">
		<input type="submit" value="Edit">
	</form>
	<form action="#" th:action="@{/events/delete/{id}(id=${event.id})}" method="post">
		<input type="submit" value="Delete">
	</form>
	<form action="#" th:action="@{/myevents}" method="get">
		<input type="submit" value="My Events">
	</form>
	<form action="#" th:action="@{/addinvite/{id}(id=${event.id})}" method="get">
		<input type="submit" value="Invitations">
	</form>
</div>
</body>
</html>